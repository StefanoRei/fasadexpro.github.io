<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Жилой комплекс AQUATORIA корп. В1, С1, В3</title>
    <link rel="stylesheet" href="../css/project.css" />
    <style>
        /* Фиксированный header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #5c7b8a;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            height: 60px;
            z-index: 1000;
        }

        /* Отступ для основного контента */
        main {
            margin-top: 20px; /* Уменьшил отступ сверху */
        }

        
        .menu-toggle {


            width: 40px;
            height: 18px;  
            z-index: 1001;
        }


        /* Стили для галереи */
        .image-gallery {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 15px;
            padding: 20px;
        }
        
        .image-gallery-column {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .image-gallery img, .image-content img {
            width: 100%;
            height: auto;
            display: block;
            cursor: pointer;
            border-radius: 5px;
            transition: transform 0.3s ease;
            background: #f5f5f5;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .image-gallery img.loaded, .image-content img.loaded {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .image-gallery img:hover, .image-content img:hover {
            transform: scale(1.02);
        }

        /* Стили для модального окна */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            overflow: auto;
            opacity: 0;
            transition: opacity 0.3s ease;
            touch-action: none;
        }
        
        .modal.active {
            display: block;
            opacity: 1;
        }
        
        .modal-content {
            display: block;
            max-width: 90%;
            max-height: 90%;
            margin: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1);
            transition: transform 0.3s ease;
            cursor: grab;
            user-select: none;
            transform-origin: center center;
        }
        
        .modal-content.grabbing {
            cursor: grabbing;
        }
        
        .close {
            position: absolute;
            top: 30px;
            right: 30px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 2001;
            transition: opacity 0.3s;
        }
        
        .close:hover {
            opacity: 0.8;
        }
        
        body.modal-open {
            overflow: hidden;
        }
        
        /* Центрирование логотипа */
        .header-logo {
            position: absolute;
            left: 47.5%;
            transform: translateX(-50%);
        }
        
        /* Адаптивность */
        @media (max-width: 900px) {
            .image-gallery-column {
                min-width: calc(50% - 10px);
            }
        }
        
        @media (max-width: 600px) {
            .image-gallery-column {
                min-width: 100%;
            }
            .close {
                top: 20px;
                right: 20px;
                font-size: 30px;
            }
            main {
                margin-top: -10px; /* Еще меньше отступ на мобильных */
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="menu-toggle">
            <div class="hamburger"></div>
            <div class="hamburger"></div>
            <div class="hamburger"></div>
        </div>
        
        <div class="header-left">
            <nav>
                <ul>
                    <li><a href="../../#pro">Проекты</a></li>
                    <li><a href="../../#usl">Услуги</a></li>
                </ul>
            </nav>
        </div>

        <div class="header-logo">
            <a href="../../index.html"><img class="logo" src="../../images/logo.png" alt="Логотип" /></a>
        </div>

        <div class="header-right">
            <nav>
                <ul>
                    <li><a href="../../#komp">О компании</a></li>
                    <li><a href="../../#kont">Контакты</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="mobile-menu">
        <nav>
            <ul>
                <li><a href="../../#pro">Проекты</a></li>
                <li><a href="../../#usl">Услуги</a></li>
                <li><a href="../../#komp">О компании</a></li>
                <li><a href="../../#kont">Контакты</a></li>
            </ul>
        </nav>
    </div>

    <main>
        <section class="content">
            <div class="content-wrapper">
                <div class="text-content">
                    <h3 class="uptitle"></h3>
                    <h1 class="title">Жилой комплекс AQUATORIA корп. В1, С1, В3</h1>
                    <h3 class="subtitle"></h3>
                    <p class="paragraph">
                        Это современный квартал премиум-класса с авторской архитектурой, повторяющей очертания водной глади. Корпуса высотой от 11 до 20 этажей построены с панорамным остеклением, которое отражает плавные изгибы водохранилища.
                    </p>
                </div>
                <div class="image-content">
                    <img src="images/main.jpg" loading="lazy" alt="Жилой комплекс AQUATORIA" onclick="enlargeImage(this)">
                </div>
            </div>
        </section>
        <section class="table-section">
            <div class="custom-table">
                <div class="table-header-row">
                    <div class="table-cell">
                        <p class="table-title">Описание работ</p>
                    </div>
                    <div class="table-cell"><strong>Генпроектировщик</strong><div class="table-divider"></div></div>
                    <div class="table-cell"><strong>Заказчик/Генподрядчик</strong><div class="table-divider"></div></div>
                </div>
                
                <div class="table-data-row">
                    <div class="table-cell">
                        <p>
                            Наши сотрудники принимали участие в инжиниринге проекта, выполнили проектирование светопрозрачных конструкций на основе системы Schüco площадью 25 000 м² и навесных вентилируемых фасадов с облицовкой алюминиевыми листами SEVALCON 9 000 м².
                        </p>
                    </div>
                    <div class="table-cell">
                        <p>ТПО «Резерв», ООО «КреаПлюс», ООО «АБ «АСновА»</p>
                    </div>
                    <div class="table-cell">
                        <p>
                           ООО «УЭЙНБРИДЖ ДЕВЕЛОПМЕНТ»/ ООО «Альфа Строй»
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <section class="image-section">
            <div class="image-gallery">
                <div class="image-gallery-column">
                    <img src="images/image_ (1).jpg" loading="lazy" alt="Фото проекта 1" onclick="enlargeImage(this)">
                    <img src="images/image_ (4).jpg" loading="lazy" alt="Фото проекта 4" onclick="enlargeImage(this)">
                    <img src="images/image_ (9).jpg" loading="lazy" alt="Фото проекта 7" onclick="enlargeImage(this)">
                </div>
                <div class="image-gallery-column">
                    <img src="images/image_ (2).jpg" loading="lazy" alt="Фото проекта 2" onclick="enlargeImage(this)">
                    <img src="images/image_ (5).jpg" loading="lazy" alt="Фото проекта 5" onclick="enlargeImage(this)">
                    <img src="images/image_ (8).jpg" loading="lazy" alt="Фото проекта 8" onclick="enlargeImage(this)">
                </div>
                <div class="image-gallery-column">
                    <img src="images/image_ (3).jpg" loading="lazy" alt="Фото проекта 3" onclick="enlargeImage(this)">
                    <img src="images/image_ (6).jpg" loading="lazy" alt="Фото проекта 6" onclick="enlargeImage(this)">
                    <img src="images/image_ (7).jpg" loading="lazy" alt="Фото проекта 9" onclick="enlargeImage(this)">
                </div>
            </div>
        </section>
    </main>

    <div id="imageModal" class="modal">
        <span class="close" id="closeModal">&times;</span>
        <img class="modal-content" id="enlargedImage" alt="Увеличенное изображение">
    </div>

    <footer id="kont">
        <div class="footer-content">Наши Контакты</div>
        <div class="footer-content">
            <a href="https://t.me/age_evaa" target="_blank" rel="nofollow noopener" aria-label="telegram"
                style="width: 30px; height: 30px">
                <svg class="t-sociallinks__svg" role="presentation" width="30px" height="30px" viewBox="0 0 100 100"
                    fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M50 100c27.614 0 50-22.386 50-50S77.614 0 50 0 0 22.386 0 50s22.386 50 50 50Zm21.977-68.056c.386-4.38-4.24-2.576-4.24-2.576-3.415 1.414-6.937 2.85-10.497 4.302-11.04 4.503-22.444 9.155-32.159 13.734-5.268 1.932-2.184 3.864-2.184 3.864l8.351 2.577c3.855 1.16 5.91-.129 5.91-.129l17.988-12.238c6.424-4.38 4.882-.773 3.34.773l-13.49 12.882c-2.056 1.804-1.028 3.35-.129 4.123 2.55 2.249 8.82 6.364 11.557 8.16.712.467 1.185.778 1.292.858.642.515 4.111 2.834 6.424 2.319 2.313-.516 2.57-3.479 2.57-3.479l3.083-20.226c.462-3.511.993-6.886 1.417-9.582.4-2.546.705-4.485.767-5.362Z"
                        fill="#ffffff"></path>
                </svg>
            </a>
        </div>
    </footer>

    <script>
        // Мобильное меню
        document.querySelector('.menu-toggle').addEventListener('click', function() {
            this.classList.toggle('active');
            document.querySelector('.mobile-menu').classList.toggle('active');
        });

        // Галерея изображений
        let currentScale = 1;
        let isDragging = false;
        let startX, startY, translateX = 0, translateY = 0;
        let clickStartTime = 0;
        let clickStartX = 0;
        let clickStartY = 0;
        const CLICK_MAX_DISTANCE = 5;
        const CLICK_MAX_DURATION = 200;

        function enlargeImage(img) {
            const modal = document.getElementById("imageModal");
            const modalImg = document.getElementById("enlargedImage");
            modalImg.src = img.src;
            modal.classList.add('active');
            document.body.classList.add('modal-open');
            
            // Сброс масштаба и позиции при открытии нового изображения
            currentScale = 1;
            translateX = 0;
            translateY = 0;
            updateImageTransform();
        }

        function closeImageModal() {
            const modal = document.getElementById("imageModal");
            modal.classList.remove('active');
            document.body.classList.remove('modal-open');
        }

        function updateImageTransform() {
            const modalImg = document.getElementById("enlargedImage");
            modalImg.style.transform = `translate(calc(-50% + ${translateX}px), calc(-50% + ${translateY}px)) scale(${currentScale})`;
        }

        function handleZoom(e) {
            e.stopPropagation();
            
            // Циклическое переключение между уровнями масштаба
            if (currentScale === 1) {
                currentScale = 2;
            } else if (currentScale === 2) {
                currentScale = 3;
            } else {
                currentScale = 1;
                translateX = 0;
                translateY = 0;
            }
            
            updateImageTransform();
        }

        // Обработчики для модального окна
        document.getElementById("closeModal").addEventListener('click', function(e) {
            e.stopPropagation();
            closeImageModal();
        });

        document.getElementById("imageModal").addEventListener('click', function(e) {
            if (e.target === this) {
                closeImageModal();
            }
        });

        // Начало взаимодействия
        document.getElementById("enlargedImage").addEventListener('mousedown', function(e) {
            clickStartTime = Date.now();
            clickStartX = e.clientX;
            clickStartY = e.clientY;
            
            e.preventDefault();
            isDragging = true;
            this.classList.add('grabbing');
            startX = e.clientX - translateX;
            startY = e.clientY - translateY;
        });

        document.getElementById("enlargedImage").addEventListener('touchstart', function(e) {
            clickStartTime = Date.now();
            clickStartX = e.touches[0].clientX;
            clickStartY = e.touches[0].clientY;
            
            e.preventDefault();
            isDragging = true;
            this.classList.add('grabbing');
            startX = e.touches[0].clientX - translateX;
            startY = e.touches[0].clientY - translateY;
        });

        // Окончание взаимодействия
        document.getElementById("enlargedImage").addEventListener('mouseup', function(e) {
            const endX = e.clientX;
            const endY = e.clientY;
            
            if (isDragging) {
                const distance = Math.sqrt(
                    Math.pow(endX - clickStartX, 2) + 
                    Math.pow(endY - clickStartY, 2)
                );
                
                // Если движение было небольшим и коротким - это клик
                if (distance <= CLICK_MAX_DISTANCE && Date.now() - clickStartTime <= CLICK_MAX_DURATION) {
                    handleZoom(e);
                }
                
                isDragging = false;
                this.classList.remove('grabbing');
                return;
            }
        });

        document.getElementById("enlargedImage").addEventListener('touchend', function(e) {
            const endX = e.changedTouches[0].clientX;
            const endY = e.changedTouches[0].clientY;
            
            if (isDragging) {
                const distance = Math.sqrt(
                    Math.pow(endX - clickStartX, 2) + 
                    Math.pow(endY - clickStartY, 2)
                );
                
                // Если движение было небольшим и коротким - это тап
                if (distance <= CLICK_MAX_DISTANCE && Date.now() - clickStartTime <= CLICK_MAX_DURATION) {
                    handleZoom(e);
                }
                
                isDragging = false;
                this.classList.remove('grabbing');
                return;
            }
        });

        // Перемещение изображения
        document.addEventListener('mousemove', function(e) {
            if (!isDragging) return;
            
            translateX = e.clientX - startX;
            translateY = e.clientY - startY;
            updateImageTransform();
        });

        document.addEventListener('touchmove', function(e) {
            if (!isDragging) return;
            
            e.preventDefault();
            translateX = e.touches[0].clientX - startX;
            translateY = e.touches[0].clientY - startY;
            updateImageTransform();
        });

        // Закрытие по ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === "Escape" && document.getElementById("imageModal").classList.contains('active')) {
                closeImageModal();
            }
        });

        // Предзагрузка изображений
        document.addEventListener('DOMContentLoaded', function() {
            const images = document.querySelectorAll('.image-gallery img, .image-content img');
            images.forEach(img => {
                const imgObj = new Image();
                imgObj.src = img.src;
                imgObj.onload = function() {
                    img.classList.add('loaded');
                };
                if (img.complete) img.classList.add('loaded');
            });
        });
    </script>
</body>

</html>